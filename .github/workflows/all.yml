name: "Project's all the Workflows"

on:
  workflow_dispatch:
    # gives option to run this workflow manually from GitHub Actions UI
  push:
    branches: [master]

# a workflow run comprises of multiple or single job that can run sequentially on in parallel
jobs:
  test_project:
    uses: ./.github/workflows/test_project.yml
    secrets:
      DJANGO_SECRET_KEY: ${{ secrets.DJANGO_SECRET_KEY }}
      POSTGRES_TEST_PASSWORD : ${{ secrets.POSTGRES_TEST_PASSWORD }}
  build_project:
    uses: ./.github/workflows/container.yml
    secrets:
      DJANGO_SECRET_KEY: ${{ secrets.DJANGO_SECRET_KEY }}
      POSTGRES_TEST_PASSWORD : ${{ secrets.POSTGRES_TEST_PASSWORD }}
    needs: test_project
