name: "Project's all the Workflows"

on:
  workflow_dispatch:
    # gives option to run this workflow manually from GitHub Actions UI
  push:
    branches: [master]

# a workflow run comprises of multiple or single job that can run sequentially on in parallel
jobs:
  test_project:
    uses: ./.github/workflows/test_project.yml
    secrets:
      POSTGRES_USER: ${{ secrets.POSTGRES_DB_USER }}
      POSTGRES_PASSWORD: ${{ secrets.POSTGRES_DB_USER_PASSWORD }}
      POSTGRES_HOST: ${{ secrets.POSTGRESQL_DB_HOST }}
      POSTGRES_DB: ${{ secrets.POSTGRESQL_DB_NAME }}
      POSTGRES_PORT: ${{ secrets.POSTGRES_DB_PORT }}  
      GITHUB_ACTIONS: true
      DJANGO_SECRET_KEY: ${{ secrets.DJANGO_SECRET_KEY }}
      DATABASE_BACKEND: ${{ secrets.DATABASE_BACKEND }}
  build_project:
    uses: ./.github/workflows/container.yml
    needs: test_project
